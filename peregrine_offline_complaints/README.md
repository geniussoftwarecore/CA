# نظام شكاوى بيرقرين - Peregrine Complaints System

نظام إدارة الشكاوى المحلي بدون إنترنت مع دعم كامل للغة العربية واتجاه النص من اليمين لليسار.

## المزايا الرئيسية

### ✅ تم التنفيذ في النسخة الحالية

- **العمل بدون إنترنت**: جميع البيانات تحفظ محلياً باستخدام localStorage
- **دعم كامل للعربية**: واجهة RTL كاملة مع خطوط عربية محلية
- **ثلاثة أدوار**: عميل، لجنة الدعم، لجنة التنسيق العليا
- **حماية بكلمة مرور**: نظام PIN محمي بتشفير SHA-256
- **نموذج شكوى متعدد الخطوات**: 5 خطوات لتقديم شكوى شاملة
- **لوحات تحكم مخصصة**: لوحة منفصلة لكل دور مع إحصائيات مفصلة
- **فئات شكاوى شاملة**: أكثر من 40 فئة حسب المواصفات المحددة
- **تصدير واستيراد البيانات**: نظام نسخ احتياطي JSON
- **وضع مظلم ونهاري**: تبديل الثيم مع حفظ الإعدادات

### 🔄 مجرى العمل (Workflow)

1. **NEW** - شكوى جديدة
2. **IN_REVIEW** - قيد المراجعة (لجنة الدعم)
3. **RESOLVED_SUPPORT** - محلولة بواسطة الدعم
4. **ESCALATED** - محولة للجنة التنسيق العليا
5. **RESOLVED_COORD** - محلولة بواسطة التنسيق
6. **CLOSED** - مغلقة
7. **REJECTED** - مرفوضة

### 📋 فئات الشكاوى المضمنة

#### المواصفات والمقاييس
- سحب عينات متكررة لنفس المنتج
- عدم قبول الفحوصات السابقة
- مبالغة في الإجراءات الشكلية والمعاينة الظاهرية
- رفض شهادات المطابقة ونتائج الاختبار
- وغيرها... (14 فئة)

#### الجمارك
- إهمال البضائع عند المطابقة
- معاملة المواد الخام كمنتج نهائي
- ازدواجية المطالبة بالضمان
- وغيرها... (14 فئة)

#### الضرائب
- طلب إقرارات سابقة
- تأخير استلام الإقرارات
- الدفع نقدًا/شيكات
- وغيرها... (5 فئات)

#### صندوق النظافة والتحسين
- التحصيل بين المديريات
- رسوم الدعاية والإعلان
- ارتفاع الرسوم
- وغيرها... (7 فئات)

## كيفية الاستخدام

### تشغيل التطبيق

1. تشغيل الخادم المحلي:
```bash
cd peregrine_offline_complaints
python3 -m http.server 5000 --directory web
```

2. فتح المتصفح وزيارة: `http://localhost:5000`

### أرقام PIN الافتراضية

- **لجنة الدعم**: 1234
- **لجنة التنسيق العليا**: 5678

> ⚠️ **هام**: يُنصح بتغيير أرقام PIN الافتراضية من الإعدادات

### استخدام النظام

#### للعملاء:
1. اختيار دور "عميل"
2. ملء نموذج الشكوى (5 خطوات)
3. متابعة الشكاوى المقدمة

#### للجنة الدعم:
1. اختيار دور "لجنة الدعم"
2. إدخال رمز PIN
3. مراجعة الشكاوى الواردة
4. تكليف الشكاوى أو حلها أو تحويلها

#### للجنة التنسيق العليا:
1. اختيار دور "لجنة التنسيق العليا"
2. إدخال رمز PIN
3. مراجعة الشكاوى المحولة
4. اتخاذ القرار النهائي (حل/إغلاق/رفض)

## الهيكل التقني

### الملفات الرئيسية
- `web/index.html` - الواجهة الرئيسية
- `web/app.js` - منطق التطبيق والبيانات
- `web/styles.css` - التصميم والأنماط
- `web/manifest.json` - إعدادات PWA

### تخزين البيانات
- `peregrine_complaints` - الشكاوى
- `peregrine_categories` - فئات الشكاوى
- `peregrine_authorities` - الجهات المختصة
- `pin_hash_support` - PIN لجنة الدعم (مشفر)
- `pin_hash_coordination` - PIN لجنة التنسيق (مشفر)

### الأمان
- أرقام PIN محمية بتشفير SHA-256
- لا توجد اتصالات خارجية (offline-first)
- خطوط عربية محلية بدون Google Fonts

## التطوير المستقبلي

### 🔄 المزايا التي تحتاج تطوير

1. **كشف الشكاوى المكررة**: مقارنة نصوص الشكاوى لاكتشاف التشابه
2. **تقارير PDF باللغة العربية**: تصدير التقارير اليومية والشاملة
3. **إرفاق الملفات**: نظام رفع وإدارة مرفقات الشكاوى
4. **IndexedDB**: ترقية نظام التخزين لدعم أفضل للبيانات الكبيرة
5. **Service Worker**: تحسين الأداء والتخزين المؤقت
6. **إشعارات**: تنبيهات للمستخدمين عند تغيير حالة الشكوى

### 🛠️ تحسينات تقنية مقترحة

1. **قاعدة بيانات محلية متقدمة**: استخدام IndexedDB بدلاً من localStorage
2. **خطوط عربية محسنة**: دمج خطوط Cairo و Amiri محلياً
3. **تحليلات وتقارير**: نظام تقارير شامل مع إحصائيات متقدمة
4. **API للتكامل**: إمكانية التكامل مع أنظمة أخرى
5. **نسخة موبايل**: تطبيق مخصص للهواتف الذكية

## المتطلبات التقنية

- متصفح حديث يدعم:
  - ES6+ JavaScript
  - Web Crypto API (للتشفير)
  - Local Storage
  - CSS Grid و Flexbox
- خادم ويب محلي (Python، Node.js، أو أي خادم آخر)

## الترخيص

هذا المشروع مفتوح المصدر ومتاح للاستخدام والتطوير.

---

**تاريخ الإنشاء**: 18 سبتمبر 2025
**النسخة**: 1.0.0 (MVP)
**المطور**: Replit Agent